<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <title>La Pista Musical</title>
</head>
<body>

<header>
    <img src="./images/Logo Pista Musical.webp" alt="Logo Pista Musical">
</header>

<h1 class="main_text">Unirse a una Sala</h1>

<div class="column_holder">
    <div class="texto_and_input1">
        <label for="codigo">Código de Sala:</label>
        <input type="text" id="codigo" maxlength="4" autocapitalize="characters">
    </div>
    <div class="texto_and_input2">
        <label for="nombre">Tu Nombre:</label>
        <input type="text" id="nombre" maxlength="12">
    </div>
</div>

<div class="boton_unirse">
    <button onclick="unirse()">Unirse</button>
</div>

<!-- Agregar el script de Socket.IO -->
<script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>

<script>
    // Conexión al servidor de Socket.IO
    const socket = io("https://servidor-canciones.onrender.com"); // URL de tu servidor

    function unirse() {
        const codigoSala = document.getElementById('codigo').value;
        const nombre = document.getElementById('nombre').value;

        // Verificar si los campos están completos
        if (!codigoSala || !nombre) {
            alert("Por favor, ingresa el código de sala y tu nombre.");
            return;
        }

        // Enviar la solicitud al servidor para unirse a la sala
        socket.emit("unirse_a_sala", { codigo: codigoSala, nombre: nombre });

        // Aquí podrías agregar más acciones, como redirigir a la página de selección de avatar
        alert(`Unido a la sala con el código: ${codigoSala}`);
    }

    // Escuchar eventos del servidor, si es necesario
    socket.on("sala_unida", (data) => {
        console.log("Has unido a la sala", data);
        // Redirigir o realizar otra acción después de unirse correctamente
    });

    socket.on("error_sala", (message) => {
        alert(message); // Mostrar mensaje de error si no se puede unir a la sala
    });
</script>

</body>
</html>
